# A Complete, Dead-Simple Guide to SEO for Static Site Generators

## Introduction

Static site generators (SSGs) are tools to convert dynamic templates into static HTML pages. SSGs like Gatsby, Jekyll, and Hugo have been gaining popularity due to their ability to allow you to use templates and represent your blog as a series of components.

One of the most appealing thing about SSGs are that they provide better support for Search Engine Optimization (SEO) as compared to regular web pages. SEO allows you website to have greater visibility on search engines, which brings in more traffic to your site from relevant audiences. SSGs allow you to incorporate common SEO patterns into your site by using the appropriate components. 

In this post we will be looking into some strategies for developing these SEO-specific components. We will then look at how to implement these strategies with some popular SSG frameworks.

## Challenges posed by SSGs with respect to SEO

Although SSGs are better for SEO in the long run, there are a few challenges that we have to overcome when compared to static sites:

1. **Creating SEO templates** - in static sites, we can add the required titles and met tags for each page individually. In the case of SSGs, we need to create a template for these tags so that they can be autogenerated for each page.
2. **Generating sitemaps** - For a static site, we can manually update our sitemap once we add new pages. In the case of SSGs, since new pages are generated dynamically, sitemaps will in turn need to be generated automatically when building our site.
3. **Source code verification** - The HTML source code for a site plays a *huge* role in SEO. For static sites, you *know* the source code that will finally appear on the website. In the case of SSGs, however, there are normally so many components and templates that you'll need to verify the source code once the website is generated. 

Although the above points seem like challenges at first, they can be treated as benefits as well: Automating SEO templates and sitemap generation will actually reduce the time and effort you spend on SEO every time you add a new page, but requires an initial effort to set it all up.

## SEO strategies for SSGs

Let's discuss some strategies and concepts common to most SSGs for enabling SEO on your site.

### Adding titles and descriptions

Every webpage needs to have meta tags to describe their title and description. Here's an example from the ButterCMS [Angular CMS page](https://buttercms.com/docs/api-client/angular):

```html
<title>Angular CMS - #1 Headless CMS for Angular | ButterCMS</title>
<meta name="description" content="ButterCMS is an API-based CMS for Angular apps. Add marketing pages, blog and more to your Angular app in minutes.">
```

The title and meta description tags give search engines a brief overview about the content of the page. They are also sometimes used by search engines in their results page:

![google result example](google-result-example.png)

For SSGs, we will need to add in these tags as templates, that need to be filled in for each page:

```html
<title>{page title}</title>
<meta name="description" content="{page description}">
```

### Open graph image and summary tags:

When we paste some links on Twitter, like this [ButterCMS blog post](https://buttercms.com/blog/building-your-own-content-management-ui-with-buttercms), it displays a summary card with an image and description. like this:

![](twitter-summary-card.png)

This is made possible by the twitter and open graph meta tags:

```html
<meta property="og:type" content="article" />
<meta property="og:url" content="https://buttercms.com/blog/building-your-own-content-management-ui-with-buttercms" />
<meta property="og:title" content="Building your own content management UI with ButterCMS" />
<meta property="og:image" content="https://cdn.buttercms.com/Ldcj5RPvSAKCEcUnAGBs" />
<meta property="og:description" content="Build your own custom content management UI dashboard and easily integrate it with a few simple javascript tools" />

<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:site" content="@ButterCMS">
<meta name="twitter:creator" content="@ButterCMS">
<meta name="twitter:title" content="Building your own content management UI with ButterCMS" />
<meta name="twitter:description" content="Build your own custom content management UI dashboard and easily integrate it with a few simple javascript tools" />
<meta name="twitter:image" content="https://cdn.buttercms.com/Ldcj5RPvSAKCEcUnAGBs" />
```

- The `twitter:card` tag tells Twitter about the type of card preview to be shown when someone pastes a link on their tweet. 
- The `twitter:image` tag provides the URL of the image to display on the card
- The `twitter:title` and `twitter:description` tags describe the title and summary text on the card respectively.

The `og` tags are specified by the [Open Graph Protocol](https://ogp.me/) and are used by other sites like Facebook and Google's rich snippets.

Each value of these tags would need to be templatized in to support SSGs:

The `twitter:card`, `twitter:site` and `twitter:creator` tags would remain same for every page on a website, while the `twitter:title`, `twitter:description` and `twitter:image` tags would change for each page:
```html
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:site" content="@ButterCMS">
<meta name="twitter:creator" content="@ButterCMS">
<meta name="twitter:title" content="{page title}" />
<meta name="twitter:description" content="{page description}" />
<meta name="twitter:image" content="{link to page banner image}" />
```

### Verifying the source code of web pages

Once your website is generated by the SSG, you will need some way top verify if the SEO related tags have actually been rendered as required. The easiest way to do this is by viewing the page source of your generated page.

This can be done by going to the browser, right clicking on a page, and selecting the "View Page Source" option:

![](view-page-source-example.png)

This will take you to another page where the source code of the page can be seen:

![](page-source-code.png)

Here, you can verify if the various meta tags are generated without error. This is the easiest and most fool proof way to verify SEO related tags, since the page source is the exact same information that is viewed by search engines when they crawl your site.

## SEO strategies for React based SSGs

SSGs like [Gatsby](https://www.gatsbyjs.org/) and [Next.js](https://nextjs.org/) use React as the templating library in addition to the application logic.

For these frameworks, the initial page HTML is generated on the server side and the React library, along with the application code is loaded later. We cannot just put in an HTML `head` element in our React components, since a component may be rendered multiple times depending on your application code, and this could lead to duplicate changes if each component needs to manipulate the pages `head` element differently.

Using libraries like [React Helmet](https://github.com/nfl/react-helmet), or [next/head](https://nextjs.org/docs#populating-head) save you from the trouble of maintaining code for these cases, and takes care of updating the document head from any of your React components without duplication.

### Next.js

You can use the `next/head` submodule to encapsulate modifications to the head element. Normally, you would have an `SEO` react component that would do this for you:

```jsx
// components/seo.js
import React from 'react'
import PropTypes from 'prop-types'
import Helmet from 'react-helmet'
import Head from 'next/head'

function SEO ({ description, title }) {
  return (
    <Head>
      <title>{title}</title>
      <meta name='description' content={description} />

      <meta name='og:type' content='website' />
      <meta name='og:title' content={title} />
      <meta name='og:description' content={description} />

      <meta name='twitter:card' content='summary' />
      <meta name='twitter:title' content={title} />
      <meta name='twitter:description' content={description} />
    </Head>
  )
}

export default SEO
```

Next, we would use this component in each of our pages. We can add this anywhere in our page component:

```jsx
// pages/index.js
import SEO from '../components/seo'

const Index = () => (
  <div>
    <SEO title='sample title' description='sample description' />
    <p>Hello Next.js</p>
  </div>
)

export default Index
```

This will result in the following output HTML for the generated `index.html` page:

```html
<!-- ... -->

<head>
        <meta name="viewport" content="width=device-width,minimum-scale=1,initial-scale=1" />
        <meta charSet="utf-8" />
        <title>sample title</title>
        <meta name="description" content="sample description" />
        <meta name="og:type" content="website" />
        <meta name="og:title" content="sample title" />
        <meta name="og:description" content="sample description" />
        <meta name="twitter:card" content="summary" />
        <meta name="twitter:title" content="sample title" />
        <meta name="twitter:description" content="sample description" />
        <meta name="next-head-count" content="10" />
        <!-- ... -->
</head>

<!-- ... -->
```

You can verify the source code by running the commands:

```
npx next build
npm next export
```

The `index.html` page will be present in the `out` directory by default.

### Gatsby

Things are much easier with Gatsby, since the SEO component is already prepared for you with the standard Gatsby project structure in `src/components/seo.js`. 

This component makes use of the React Helmet library to generate the `head` HTML tags:

```jsx
<Helmet
    htmlAttributes={{
      lang
    }}
    title={title}
    titleTemplate={`%s | ${site.siteMetadata.title}`}
    meta={[
      {
        name: `description`,
        content: metaDescription
      },
      {
        property: `og:title`,
        content: title
      },
      {
        property: `og:description`,
        content: metaDescription
      },
      {
        property: `og:type`,
        content: `website`
      },
      {
        name: `twitter:card`,
        content: `summary`
      },
      {
        name: `twitter:creator`,
        content: site.siteMetadata.author
      },
      {
        name: `twitter:title`,
        content: title
      },
      {
        name: `twitter:description`,
        content: metaDescription
      }
    ].concat(meta)}
  />
```

The SEO component can be used (and is, by default) in the `src/pages/index.js` file:

```jsx
import React from "react"

// ...
import SEO from "../components/seo"

const IndexPage = () => (
  <Layout>
    <SEO title="Home" />
    {/* ... */}
  </Layout>
)

export default IndexPage
```

This will lead to a similar generated `index.html` , which you can verify by running `npm run build` and viewing the `public/index.html` file.

## SEO strategies for Jekyll sites

[Jekyll](https://jekyllrb.com) is a popular SSG that works using ERB (embedded ruby) templates and layouts to customize each page.

You can follow along the [getting started tutorial](https://jekyllrb.com/docs/) to get a starter site up and running. In order to add SEO specific tags to you Jekyll site, you will need to modify the default template.

Create the file `_layouts/default.html` that will contain the base template for all our pages:

```html
<!doctype html>
<html lang="en">

<head>
        <meta charset="utf-8">
        <link rel="stylesheet" href="/css/style.css">

        <!-- We add the SEO tags here -->
        <title>{{ page.title }}</title>
        <meta name="description" content="{{ page.description }}" />
        <meta name="og:type" content="website" />
        <meta name="og:title" content="{{ page.title }}" />
        <meta name="og:description" content="{{ page.description }}" />
        <meta name="twitter:card" content="summary" />
        <meta name="twitter:title" content="{{ page.title }}" />
        <meta name="twitter:description" content="{{ page.description }}" />
        <meta name="next-head-count" content="10" />
</head>

<body>
        <nav>
                <a href="/">Home</a>
                <a href="/blog/">Blog</a>
        </nav>
        <h1>{{ page.title }}</h1>
        <section>
                {{ content }}
        </section>
        <footer>
                &copy; to me
        </footer>
</body>

</html>
```

In the above template, the `page.title` and `page.description` are template variables and differ for each page. In Jekyll, each page is compiled from a markdown file. The header of the markdown file will contain the `title` and `description` variables that will be used in the template.

Lets take a look at a sample markdown file in the `_posts` directory:

```
---
layout: post
title:  "Welcome to Jekyll!"
description: "Sample description"
date:   2019-08-28 00:22:09 +0530
categories: jekyll update
---

Some page content...
...
...
...

```

In Jekyll, the `post` layout mentioned in he header above inherits from the `default` layout we just define. This would give us the required meta tags in our generated HTML:

```html
<title>Welcome to Jekyll!</title>
<meta name="description" content="Sample description" />
<meta name="og:type" content="website" />
<meta name="og:title" content="Welcome to Jekyll!" />
<meta name="og:description" content="Sample description" />
<meta name="twitter:card" content="summary" />
<meta name="twitter:title" content="Welcome to Jekyll!" />
<meta name="twitter:description" content="Sample description" />
<meta name="next-head-count" content="10" />
```

If you want to view or verify the HTML on your Jekyll site, run the `jekyll build` command and view the respective HTML files within the `_site` folder.


## SEO strategies for Hugo based sites

[Hugo](https://gohugo.io) is one of the fastest SSGs powered by Go (and which consequently uses Go templating). If you follow along with the [quick start guide](https://gohugo.io/getting-started/quick-start/), you should have a basic site up and running.

Hugo has most of the SEO requirements built in, which means you won't have to set anything up to generate the title meta tags discussed for the previous SSGs.

You can generate a new page using the command:

```
hugo new posts/<post-title>.md
```

This should generate a markdown file with the header:

```
---
title: "My First Post"
date: 2019-08-28T01:29:26+05:30
draft: true
---
```

This will cover all the SEO tags except for the description tags. You can fill this in by adding a `description` key to the post header:

```
---
title: "My Sample Post"
date: 2019-08-28T01:29:26+05:30
description: "My Sample Description"
draft: true
---
```

In order to verify the source code, you can run `hugo -D` and see you posts HTML file in `public/posts/<post-title>/index.html`

## Conclusion

In this article, we covered the basics of SEO and SSGs, and the concepts needed in order to integrate SEO into your site.

We saw how to apply SEO in a number of SSGs like Gatsby, Next, Jekyll, and Hugo, but this can be applied to any SSG of your choice. The two things you need to look out for are:

1. A way to modify the SSGs HTML tags (specifically in the head)
2. A way to change the HTML tags for individual pages, while maintaining a common template.

I hope this post has helped you understand the importance of SEO and how to integrate it into the SSG of your choice.